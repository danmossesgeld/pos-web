import{s as W,n as O,c as X,o as Z}from"../chunks/scheduler.BELo7BN7.js";import{S as $,i as tt,e as m,t as w,s as q,c as v,a as T,b as L,d as u,f as C,k as R,l as b,g as j,h as o,n as et,j as M,u as U,o as st}from"../chunks/index.BanRfVMS.js";import{e as Y}from"../chunks/each.D6YF6ztN.js";import{p as at}from"../chunks/stores.BMfDWuh-.js";import{g as lt,q as rt,c as ot,w as nt,a as ct}from"../chunks/index.esm2017.C5xuyXIG.js";import{g as it}from"../chunks/entry.DwvVpkrU.js";function z(c,t,s){const e=c.slice();return e[2]=t[s].pID,e[5]=t[s].name,e[6]=t[s].quantity,e[7]=t[s].srp,e}function dt(c){let t,s='<td colspan="5" class="text-center py-4">No details found for this transaction</td>';return{c(){t=m("tr"),t.innerHTML=s},l(e){t=v(e,"TR",{"data-svelte-h":!0}),R(t)!=="svelte-bqaxt3"&&(t.innerHTML=s)},m(e,a){j(e,t,a)},p:O,d(e){e&&u(t)}}}function ft(c){let t,s=Y(c[0]),e=[];for(let a=0;a<s.length;a+=1)e[a]=J(z(c,s,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=U()},l(a){for(let n=0;n<e.length;n+=1)e[n].l(a);t=U()},m(a,n){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,n);j(a,t,n)},p(a,n){if(n&1){s=Y(a[0]);let l;for(l=0;l<s.length;l+=1){const f=z(a,s,l);e[l]?e[l].p(f,n):(e[l]=J(f),e[l].c(),e[l].m(t.parentNode,t))}for(;l<e.length;l+=1)e[l].d(1);e.length=s.length}},d(a){a&&u(t),st(e,a)}}}function J(c){let t,s,e=c[2]+"",a,n,l,f=c[5]+"",i,h,x,y=c[6]+"",g,P,k,E=c[7]+"",D,A,I,H=(c[6]*c[7]).toFixed(2)+"",S,N;return{c(){t=m("tr"),s=m("td"),a=w(e),n=q(),l=m("td"),i=w(f),h=q(),x=m("td"),g=w(y),P=q(),k=m("td"),D=w(E),A=q(),I=m("td"),S=w(H),N=q(),this.h()},l(d){t=v(d,"TR",{class:!0});var r=T(t);s=v(r,"TD",{class:!0});var p=T(s);a=L(p,e),p.forEach(u),n=C(r),l=v(r,"TD",{class:!0});var _=T(l);i=L(_,f),_.forEach(u),h=C(r),x=v(r,"TD",{class:!0});var B=T(x);g=L(B,y),B.forEach(u),P=C(r),k=v(r,"TD",{class:!0});var V=T(k);D=L(V,E),V.forEach(u),A=C(r),I=v(r,"TD",{class:!0});var F=T(I);S=L(F,H),F.forEach(u),N=C(r),r.forEach(u),this.h()},h(){b(s,"class","border px-2 py-1"),b(l,"class","border px-2 py-1"),b(x,"class","border px-2 py-1"),b(k,"class","border px-2 py-1"),b(I,"class","border px-2 py-1"),b(t,"class","hover:bg-gray-200 transition duration-200 text-sm")},m(d,r){j(d,t,r),o(t,s),o(s,a),o(t,n),o(t,l),o(l,i),o(t,h),o(t,x),o(x,g),o(t,P),o(t,k),o(k,D),o(t,A),o(t,I),o(I,S),o(t,N)},p(d,r){r&1&&e!==(e=d[2]+"")&&M(a,e),r&1&&f!==(f=d[5]+"")&&M(i,f),r&1&&y!==(y=d[6]+"")&&M(g,y),r&1&&E!==(E=d[7]+"")&&M(D,E),r&1&&H!==(H=(d[6]*d[7]).toFixed(2)+"")&&M(S,H)},d(d){d&&u(t)}}}function K(c){let t,s,e="Grand Total:",a,n,l=c[1].toFixed(2)+"",f;return{c(){t=m("div"),s=m("span"),s.textContent=e,a=q(),n=m("span"),f=w(l),this.h()},l(i){t=v(i,"DIV",{class:!0});var h=T(t);s=v(h,"SPAN",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-1kq6qlt"&&(s.textContent=e),a=C(h),n=v(h,"SPAN",{});var x=T(n);f=L(x,l),x.forEach(u),h.forEach(u),this.h()},h(){b(s,"class","mr-4"),b(t,"class","flex justify-end mt-4 text-xl font-semibold")},m(i,h){j(i,t,h),o(t,s),o(t,a),o(t,n),o(n,f)},p(i,h){h&2&&l!==(l=i[1].toFixed(2)+"")&&M(f,l)},d(i){i&&u(t)}}}function ht(c){let t,s,e,a,n,l,f,i,h,x='<tr><th class="px-2 py-1 text-left text-sm">Product ID</th> <th class="px-2 py-1 text-left text-sm">Item Name</th> <th class="px-2 py-1 text-left text-sm">Qty</th> <th class="px-2 py-1 text-left text-sm">SRP</th> <th class="px-2 py-1 text-left text-sm">Total</th></tr>',y,g,P,k,E,D,A="Back to Transactions",I,H;function S(p,_){return p[0].length>0?ft:dt}let N=S(c),d=N(c),r=c[0].length>0&&K(c);return{c(){t=m("div"),s=m("h2"),e=w("Item List for transaction #["),a=w(c[2]),n=w("]"),l=q(),f=m("div"),i=m("table"),h=m("thead"),h.innerHTML=x,y=q(),g=m("tbody"),d.c(),P=q(),r&&r.c(),k=q(),E=m("div"),D=m("button"),D.textContent=A,this.h()},l(p){t=v(p,"DIV",{class:!0});var _=T(t);s=v(_,"H2",{class:!0});var B=T(s);e=L(B,"Item List for transaction #["),a=L(B,c[2]),n=L(B,"]"),B.forEach(u),l=C(_),f=v(_,"DIV",{class:!0});var V=T(f);i=v(V,"TABLE",{class:!0});var F=T(i);h=v(F,"THEAD",{class:!0,"data-svelte-h":!0}),R(h)!=="svelte-1eu46do"&&(h.innerHTML=x),y=C(F),g=v(F,"TBODY",{class:!0});var G=T(g);d.l(G),G.forEach(u),F.forEach(u),V.forEach(u),P=C(_),r&&r.l(_),k=C(_),E=v(_,"DIV",{class:!0});var Q=T(E);D=v(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),R(D)!=="svelte-1hdvr1x"&&(D.textContent=A),Q.forEach(u),_.forEach(u),this.h()},h(){b(s,"class","text-2xl font-bold mb-4"),b(h,"class","bg-gradient-to-r from-blue-500 to-blue-500 text-white"),b(g,"class","bg-white"),b(i,"class","min-w-full table-auto border-collapse"),b(f,"class","overflow-x-auto border border-gray-300 rounded-lg"),b(D,"class","bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600"),b(E,"class","flex justify-center mt-4"),b(t,"class","flex flex-col p-4")},m(p,_){j(p,t,_),o(t,s),o(s,e),o(s,a),o(s,n),o(t,l),o(t,f),o(f,i),o(i,h),o(i,y),o(i,g),d.m(g,null),o(t,P),r&&r.m(t,null),o(t,k),o(t,E),o(E,D),I||(H=et(D,"click",c[3]),I=!0)},p(p,[_]){_&4&&M(a,p[2]),N===(N=S(p))&&d?d.p(p,_):(d.d(1),d=N(p),d&&(d.c(),d.m(g,null))),p[0].length>0?r?r.p(p,_):(r=K(p),r.c(),r.m(t,k)):r&&(r.d(1),r=null)},i:O,o:O,d(p){p&&u(t),d.d(),r&&r.d(),I=!1,H()}}}function ut(c,t,s){let e;X(c,at,i=>s(4,e=i));let a=[],n,l=0;Z(async()=>{if(n)try{const i=lt(),h=rt(ot(i,"TransactionItems"),nt("id","==",n)),x=await ct(h);s(0,a=x.docs.map(y=>({...y.data(),id:y.id}))),s(1,l=a.reduce((y,g)=>y+g.quantity*g.srp,0))}catch(i){console.error("Error fetching transaction details:",i)}});const f=()=>{it("/admin/transactions")};return c.$$.update=()=>{c.$$.dirty&16&&s(2,n=e.url.searchParams.get("pID")||"")},[a,l,n,f,e]}class xt extends ${constructor(t){super(),tt(this,t,ut,ht,W,{})}}export{xt as component};
