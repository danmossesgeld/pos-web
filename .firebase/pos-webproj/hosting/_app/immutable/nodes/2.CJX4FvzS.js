import{s as te,b as se,u as ae,g as le,d as oe,o as re,e as ne}from"../chunks/scheduler.BELo7BN7.js";import{S as ie,i as ce,e as u,s as k,t as F,c as d,a as w,k as J,f as D,d as m,b as W,l as i,p as A,g as X,h as a,n as Z,j as fe,v as ue,w as de,o as me}from"../chunks/index.BanRfVMS.js";import{e as he}from"../chunks/each.D6YF6ztN.js";import{o as ve,s as _e,a as K}from"../chunks/firebase.client.Bnf0kfj9.js";import{g as pe,q as ge,w as ye,c as we,a as be}from"../chunks/index.esm2017.C5xuyXIG.js";import{f as R}from"../chunks/feather.4YeCTLL6.js";import{g as xe}from"../chunks/entry.DwvVpkrU.js";function Ee(o,e,s){const r=o.slice();return r[7]=e[s],r}function Ie(o){let e,s,r,E=o[7].text+"",_,c,x,p;function h(){return o[4](o[7])}return{c(){e=u("button"),s=u("i"),r=k(),_=F(E),c=k(),this.h()},l(l){e=d(l,"BUTTON",{class:!0});var n=w(e);s=d(n,"I",{"data-feather":!0,class:!0}),w(s).forEach(m),r=D(n),_=W(n,E),c=D(n),n.forEach(m),this.h()},h(){i(s,"data-feather",o[7].icon),i(s,"class","mr-2"),i(e,"class","sidebar-button flex items-center text-left p-2 mt-2 hover:bg-gray-200 rounded-md svelte-1fusgfx")},m(l,n){X(l,e,n),a(e,s),a(e,r),a(e,_),a(e,c),x||(p=Z(e,"click",h),x=!0)},p(l,n){o=l},d(l){l&&m(e),x=!1,p()}}}function Le(o){let e,s,r,E='<div class="flex items-center"><i data-feather="codesandbox" class="mr-2"></i> <span class="font-bold">COMPANY ONE</span></div>',_,c,x,p,h,l=`<i data-feather="log-out" class="mr-2"></i>
                Logout`,n,g,v,M,C,I,O,N=(o[0]?o[0].email:"Unknown")+"",S,j,L,T,q,P,ee=he([{name:"Inventory",text:"Inventory List",icon:"archive"},{name:"Users",text:"System Users",icon:"users"},{name:"Transactions",text:"Transaction List",icon:"file-text"}]),V=[];for(let t=0;t<3;t+=1)V[t]=Ie(Ee(o,ee,t));const H=o[3].default,f=se(H,o,o[2],null);return{c(){e=u("div"),s=u("aside"),r=u("div"),r.innerHTML=E,_=k(),c=u("nav");for(let t=0;t<3;t+=1)V[t].c();x=k(),p=u("div"),h=u("button"),h.innerHTML=l,n=k(),g=u("main"),v=u("div"),M=u("div"),C=k(),I=u("div"),O=F("Welcome, Admin "),S=F(N),j=k(),L=u("div"),f&&f.c(),this.h()},l(t){e=d(t,"DIV",{class:!0});var b=w(e);s=d(b,"ASIDE",{class:!0,style:!0});var y=w(s);r=d(y,"DIV",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-7dsi6g"&&(r.innerHTML=E),_=D(y),c=d(y,"NAV",{class:!0});var Q=w(c);for(let B=0;B<3;B+=1)V[B].l(Q);Q.forEach(m),x=D(y),p=d(y,"DIV",{class:!0});var Y=w(p);h=d(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-r79mdz"&&(h.innerHTML=l),Y.forEach(m),y.forEach(m),n=D(b),g=d(b,"MAIN",{class:!0});var U=w(g);v=d(U,"DIV",{class:!0,style:!0});var $=w(v);M=d($,"DIV",{class:!0}),w(M).forEach(m),C=D($),I=d($,"DIV",{class:!0});var z=w(I);O=W(z,"Welcome, Admin "),S=W(z,N),z.forEach(m),$.forEach(m),j=D(U),L=d(U,"DIV",{class:!0,style:!0});var G=w(L);f&&f.l(G),G.forEach(m),U.forEach(m),b.forEach(m),this.h()},h(){i(r,"class","company-banner flex items-center justify-start my-4 border-b border-gray-300 pb-3 h-8"),i(c,"class","flex flex-col flex-grow"),i(h,"class","logout-button flex items-center svelte-1fusgfx"),i(p,"class","flex justify-end mt-auto mr-auto ml-auto"),i(s,"class","flex flex-col sidebar bg-white w-60 p-1.5 fixed h-full shadow-lg svelte-1fusgfx"),A(s,"top","0"),i(M,"class","flex items-center"),i(I,"class","user-info text-gray-700 ml-auto"),i(v,"class","top-panel flex items-center justify-between bg-white fixed shadow-md p-2 svelte-1fusgfx"),A(v,"z-index","100"),A(v,"height","55px"),A(v,"left","240px"),A(v,"right","0"),i(L,"class","content-area p-6 bg-gray-100 svelte-1fusgfx"),A(L,"margin-top","50px"),i(g,"class","flex-grow ml-60 overflow-y-auto"),i(e,"class","flex h-screen overflow-hidden")},m(t,b){X(t,e,b),a(e,s),a(s,r),a(s,_),a(s,c);for(let y=0;y<3;y+=1)V[y]&&V[y].m(c,null);a(s,x),a(s,p),a(p,h),a(e,n),a(e,g),a(g,v),a(v,M),a(v,C),a(v,I),a(I,O),a(I,S),a(g,j),a(g,L),f&&f.m(L,null),T=!0,q||(P=Z(h,"click",o[1]),q=!0)},p(t,[b]){(!T||b&1)&&N!==(N=(t[0]?t[0].email:"Unknown")+"")&&fe(S,N),f&&f.p&&(!T||b&4)&&ae(f,H,t,t[2],T?oe(H,t[2],b,null):le(t[2]),null)},i(t){T||(ue(f,t),T=!0)},o(t){de(f,t),T=!1},d(t){t&&m(e),me(V,t),f&&f.d(t),q=!1,P()}}}function Te(o,e,s){let{$$slots:r={},$$scope:E}=e,_=null,c=null;const x=pe(),p=async()=>{try{await _e(K),localStorage.removeItem("loggedInUser"),window.location.href="/login"}catch(l){console.error("Logout Error:",l)}};re(async()=>{ve(K,async l=>{if(!l){window.location.href="/login";return}s(0,_=l);const n=ge(we(x,"users"),ye("email","==",_.email)),g=await be(n);if(g.empty){console.error("No user record found in Firestore."),window.location.href="/login";return}c=g.docs[0].data().type,c!=="admin"&&window.location.pathname==="/admin"&&(window.location.href="/user"),R.replace()})}),ne(()=>{R.replace()});const h=l=>xe(`/admin/${l.name.toLowerCase()}`);return o.$$set=l=>{"$$scope"in l&&s(2,E=l.$$scope)},[_,p,E,r,h]}class Ue extends ie{constructor(e){super(),ce(this,e,Te,Le,te,{})}}export{Ue as component};
