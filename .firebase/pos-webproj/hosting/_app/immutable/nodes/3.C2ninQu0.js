import{s as Z,b as ee,u as te,g as ae,d as se,o as le,e as oe}from"../chunks/scheduler.BELo7BN7.js";import{S as re,i as ne,e as p,s as S,t as q,c as g,a as y,k as Q,f as C,d as w,b as H,l as h,p as ie,g as R,h as r,n as X,j as ce,v as fe,w as ue,o as de}from"../chunks/index.BanRfVMS.js";import{e as Y}from"../chunks/each.D6YF6ztN.js";import{o as me,s as he,a as z}from"../chunks/firebase.client.Bnf0kfj9.js";import{g as _e,q as ve,w as pe,c as ge,a as we}from"../chunks/index.esm2017.C5xuyXIG.js";import{f as G}from"../chunks/feather.4YeCTLL6.js";function J(o,t,s){const n=o.slice();return n[7]=t[s],n}function K(o){let t,s,n,x=o[7].text+"",_,c,b,f;function v(){return o[4](o[7])}return{c(){t=p("button"),s=p("i"),n=S(),_=q(x),c=S(),this.h()},l(l){t=g(l,"BUTTON",{class:!0});var i=y(t);s=g(i,"I",{"data-feather":!0,class:!0}),y(s).forEach(w),n=C(i),_=H(i,x),c=C(i),i.forEach(w),this.h()},h(){h(s,"data-feather",o[7].icon),h(s,"class","mr-2"),h(t,"class","sidebar-button svelte-10lamfv")},m(l,i){R(l,t,i),r(t,s),r(t,n),r(t,_),r(t,c),b||(f=X(t,"click",v),b=!0)},p(l,i){o=l},d(l){l&&w(t),b=!1,f()}}}function be(o){let t,s,n,x='<div class="flex items-center"><i data-feather="codesandbox" class="mr-2"></i> <span class="font-bold text-lg">COMPANY ONE</span></div>',_,c,b,f,v,l,i=(o[0]?o[0].email:"Unknown")+"",E,N,k,j=`<i data-feather="log-out" class="mr-2"></i>
              Logout`,O,T,L,I,$,B,V=Y([{name:"pos",text:"POS",icon:"dollar-sign"},{name:"pricecheck",text:"Price Check",icon:"search"}]),d=[];for(let e=0;e<2;e+=1)d[e]=K(J(o,V,e));const A=o[3].default,u=ee(A,o,o[2],null);return{c(){t=p("div"),s=p("aside"),n=p("div"),n.innerHTML=x,_=S(),c=p("nav");for(let e=0;e<2;e+=1)d[e].c();b=S(),f=p("div"),v=p("div"),l=q("Welcome, "),E=q(i),N=S(),k=p("button"),k.innerHTML=j,O=S(),T=p("main"),L=p("div"),u&&u.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var m=y(t);s=g(m,"ASIDE",{class:!0,style:!0});var a=y(s);n=g(a,"DIV",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1tg5xm0"&&(n.innerHTML=x),_=C(a),c=g(a,"NAV",{class:!0});var D=y(c);for(let U=0;U<2;U+=1)d[U].l(D);D.forEach(w),b=C(a),f=g(a,"DIV",{class:!0});var M=y(f);v=g(M,"DIV",{class:!0});var P=y(v);l=H(P,"Welcome, "),E=H(P,i),P.forEach(w),N=C(M),k=g(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(k)!=="svelte-11c25sn"&&(k.innerHTML=j),M.forEach(w),a.forEach(w),O=C(m),T=g(m,"MAIN",{class:!0});var F=y(T);L=g(F,"DIV",{class:!0});var W=y(L);u&&u.l(W),W.forEach(w),F.forEach(w),m.forEach(w),this.h()},h(){h(n,"class","company-banner flex items-center justify-start my-4 border-b border-gray-300 pb-3 h-16"),h(c,"class","flex flex-col flex-grow"),h(v,"class","welcome-message mb-2 text-sm text-gray-700"),h(k,"class","logout-button flex items-center svelte-10lamfv"),h(f,"class","flex flex-col mt-auto justify-center items-center"),h(s,"class","flex flex-col sidebar bg-white w-60 p-1.5 fixed h-full shadow-lg svelte-10lamfv"),ie(s,"top","0"),h(L,"class","content-area bg-gray-100 h-full v-full svelte-10lamfv"),h(T,"class","flex-grow ml-60 overflow-y-auto h-screen"),h(t,"class","flex h-screen overflow-hidden")},m(e,m){R(e,t,m),r(t,s),r(s,n),r(s,_),r(s,c);for(let a=0;a<2;a+=1)d[a]&&d[a].m(c,null);r(s,b),r(s,f),r(f,v),r(v,l),r(v,E),r(f,N),r(f,k),r(t,O),r(t,T),r(T,L),u&&u.m(L,null),I=!0,$||(B=X(k,"click",o[1]),$=!0)},p(e,[m]){if(m&0){V=Y([{name:"pos",text:"POS",icon:"dollar-sign"},{name:"pricecheck",text:"Price Check",icon:"search"}]);let a;for(a=0;a<2;a+=1){const D=J(e,V,a);d[a]?d[a].p(D,m):(d[a]=K(D),d[a].c(),d[a].m(c,null))}for(;a<2;a+=1)d[a].d(1)}(!I||m&1)&&i!==(i=(e[0]?e[0].email:"Unknown")+"")&&ce(E,i),u&&u.p&&(!I||m&4)&&te(u,A,e,e[2],I?se(A,e[2],m,null):ae(e[2]),null)},i(e){I||(fe(u,e),I=!0)},o(e){ue(u,e),I=!1},d(e){e&&w(t),de(d,e),u&&u.d(e),$=!1,B()}}}function ye(o,t,s){let{$$slots:n={},$$scope:x}=t,_=null,c=null;const b=_e(),f=async()=>{try{await he(z),localStorage.removeItem("loggedInUser"),window.location.href="/login"}catch(l){console.error("Logout Error:",l)}};le(async()=>{me(z,async l=>{if(!l){window.location.href="/login";return}s(0,_=l);const i=ve(ge(b,"users"),pe("email","==",_.email)),E=await we(i);if(E.empty){console.error("No user record found in Firestore."),window.location.href="/login";return}c=E.docs[0].data().type,c!=="admin"&&window.location.pathname==="/admin"&&(window.location.href="/user"),G.replace()})}),oe(()=>{G.replace()});const v=l=>window.location.href=`/user/${l.name}`;return o.$$set=l=>{"$$scope"in l&&s(2,x=l.$$scope)},[_,f,x,n,v]}class Se extends re{constructor(t){super(),ne(this,t,ye,be,Z,{})}}export{Se as component};
