import { c as create_ssr_component, e as escape, f as add_attribute, h as null_to_empty } from "../../../chunks/ssr.js";
import "../../../chunks/firebase.client.js";
import "firebase/auth";
import { getFirestore } from "firebase/firestore";
import "../../../chunks/client.js";
import "feather-icons";
const css = {
  code: ".fade-in.svelte-vkvs24{animation:svelte-vkvs24-fadeIn 0.5s ease-in-out forwards}@keyframes svelte-vkvs24-fadeIn{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.spinner.svelte-vkvs24{border:4px solid rgba(255, 255, 255, 0.3);border-top:4px solid white;border-radius:50%;width:20px;height:20px;animation:svelte-vkvs24-spin 1s linear infinite;margin:0 auto}@keyframes svelte-vkvs24-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.input-icon.svelte-vkvs24{position:absolute;top:70%;left:12px;transform:translateY(-50%);pointer-events:none;color:#6B7280}.input-with-icon.svelte-vkvs24{padding-left:40px;height:48px}button.svelte-vkvs24{display:flex;align-items:center;justify-content:center}.register-button.svelte-vkvs24{padding:10px 20px;display:flex;justify-content:center;align-items:center;gap:0.5rem;font-size:16px;font-weight:600;height:48px}",
  map: '{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport { auth } from \\"../../lib/firebase/firebase.client\\";\\nimport { signInWithEmailAndPassword, signOut } from \\"firebase/auth\\";\\nimport { getFirestore, query, where, getDocs, collection } from \\"firebase/firestore\\";\\nimport { goto } from \\"$app/navigation\\";\\nimport feather from \\"feather-icons\\";\\nlet email = \\"\\";\\nlet password = \\"\\";\\nlet errorMessage = \\"\\";\\nlet isLoading = false;\\nconst db = getFirestore();\\nconst handleLogin = async () => {\\n  isLoading = true;\\n  errorMessage = \\"\\";\\n  try {\\n    const loggedInUser = localStorage.getItem(\\"loggedInUser\\") || \\"\\";\\n    if (loggedInUser) {\\n      errorMessage = \\"Another user is already logged in. Please log out first.\\";\\n      isLoading = false;\\n      return;\\n    }\\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\\n    const user = userCredential.user;\\n    localStorage.setItem(\\"loggedInUser\\", user.email || \\"\\");\\n    const userQuery = query(collection(db, \\"users\\"), where(\\"email\\", \\"==\\", email));\\n    const querySnapshot = await getDocs(userQuery);\\n    if (!querySnapshot.empty) {\\n      const userDoc = querySnapshot.docs[0];\\n      const userData = userDoc.data();\\n      if (userData.type) {\\n        if (userData.type === \\"admin\\") {\\n          goto(\\"/admin\\");\\n        } else if (userData.type === \\"user\\") {\\n          goto(\\"/user\\");\\n        }\\n      } else {\\n        await signOut(auth);\\n        localStorage.removeItem(\\"loggedInUser\\");\\n        alert(\\"Account type is not yet assigned\\");\\n        goto(\\"/login\\");\\n        location.reload();\\n      }\\n    } else {\\n      errorMessage = \\"No user record found in Firestore.\\";\\n    }\\n  } catch (error) {\\n    console.error(\\"Login Error:\\", error);\\n    errorMessage = error.message;\\n  } finally {\\n    isLoading = false;\\n  }\\n};\\nonMount(() => {\\n  feather.replace();\\n});\\n<\/script>\\r\\n\\r\\n<style>\\r\\n    .fade-in {\\r\\n        animation: fadeIn 0.5s ease-in-out forwards;\\r\\n    }\\r\\n\\r\\n    @keyframes fadeIn {\\r\\n        from {\\r\\n            opacity: 0;\\r\\n            transform: translateY(-20px);\\r\\n        }\\r\\n        to {\\r\\n            opacity: 1;\\r\\n            transform: translateY(0);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    .spinner {\\r\\n        border: 4px solid rgba(255, 255, 255, 0.3);\\r\\n        border-top: 4px solid white;\\r\\n        border-radius: 50%;\\r\\n        width: 20px;\\r\\n        height: 20px;\\r\\n        animation: spin 1s linear infinite;\\r\\n        margin: 0 auto;\\r\\n    }\\r\\n\\r\\n    @keyframes spin {\\r\\n        0% {\\r\\n            transform: rotate(0deg);\\r\\n        }\\r\\n        100% {\\r\\n            transform: rotate(360deg);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    /* Position the icon properly */\\r\\n    .input-icon {\\r\\n        position: absolute;\\r\\n        top: 70%;\\r\\n        left: 12px;\\r\\n        transform: translateY(-50%);\\r\\n        pointer-events: none;\\r\\n        color: #6B7280;\\r\\n    }\\r\\n\\r\\n    /* Input fields with padding for the icon */\\r\\n    .input-with-icon {\\r\\n        padding-left: 40px;\\r\\n        height: 48px;\\r\\n    }\\r\\n\\r\\n    /* Button styling */\\r\\n    button {\\r\\n        display: flex;\\r\\n        align-items: center;\\r\\n        justify-content: center;\\r\\n    }\\r\\n\\r\\n    .register-button {\\r\\n        padding: 10px 20px;\\r\\n        display: flex;\\r\\n        justify-content: center;\\r\\n        align-items: center;\\r\\n        gap: 0.5rem; /* Gap between icon and text */\\r\\n        font-size: 16px;\\r\\n        font-weight: 600;\\r\\n        height: 48px; /* Adjust to control the button height */\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<div class=\\"flex items-center justify-center h-screen bg-gradient-to-b from-blue-600 to-indigo-300\\">\\r\\n    <form \\r\\n      on:submit|preventDefault={handleLogin} \\r\\n      class={`bg-white bg-opacity-80 p-10 rounded-lg shadow-lg w-96 transition-opacity duration-500 fade-in`}\\r\\n    >\\r\\n      <h2 class=\\"text-3xl font-bold mb-6 text-center text-gray-800\\">Welcome back!</h2>\\r\\n      \\r\\n      <div class=\\"relative mb-4\\">\\r\\n        <label for=\\"email\\" class=\\"block text-gray-600 font-medium\\">Email:</label>\\r\\n        <i data-feather=\\"mail\\" class=\\"input-icon\\"></i> <!-- Feather email icon -->\\r\\n        <input type=\\"email\\" id=\\"email\\" bind:value={email} required class=\\"input-with-icon border border-gray-300 rounded w-full p-3 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-400\\" />\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\"relative mb-4\\">\\r\\n        <label for=\\"password\\" class=\\"block text-gray-600 font-medium\\">Password:</label>\\r\\n        <i data-feather=\\"lock\\" class=\\"input-icon\\"></i> <!-- Feather password icon -->\\r\\n        <input type=\\"password\\" id=\\"password\\" bind:value={password} required class=\\"input-with-icon border border-gray-300 rounded w-full p-3 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-400\\" />\\r\\n      </div>\\r\\n      \\r\\n      <button \\r\\n        type=\\"submit\\" \\r\\n        class={`bg-gradient-to-b from-blue-400 to-indigo-600 text-white p-3 rounded-lg font-semibold transition-transform duration-300 w-full flex items-center justify-center space-x-2 \\r\\n                ${isLoading ? \'bg-blue-600\' : \'hover:bg-blue-600\'}`}\\r\\n      >\\r\\n        {#if isLoading}\\r\\n          <div class=\\"spinner\\"></div> <!-- Spinner shown when loading -->\\r\\n        {:else}\\r\\n          <i data-feather=\\"log-in\\"></i> <!-- Feather login icon -->\\r\\n          <span>Login</span>\\r\\n        {/if}\\r\\n      </button>\\r\\n      \\r\\n      {#if errorMessage}\\r\\n        <p class=\\"text-red-500 mt-2 text-sm text-center\\">{errorMessage}</p>\\r\\n      {/if}\\r\\n      \\r\\n      <p class=\\"mt-4 text-center text-gray-600\\">Don\'t have an account? \\r\\n        <a href=\\"/register\\" class=\\"text-blue-500 hover:underline register-button\\">\\r\\n          <i data-feather=\\"user-plus\\"></i> <!-- Feather register icon -->\\r\\n          Register here\\r\\n        </a>\\r\\n      </p>\\r\\n    </form>\\r\\n</div>\\r\\n"],"names":[],"mappings":"AA0DI,sBAAS,CACL,SAAS,CAAE,oBAAM,CAAC,IAAI,CAAC,WAAW,CAAC,QACvC,CAEA,WAAW,oBAAO,CACd,IAAK,CACD,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,KAAK,CAC/B,CACA,EAAG,CACC,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,CAAC,CAC3B,CACJ,CAEA,sBAAS,CACL,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAC3B,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,kBAAI,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,CAClC,MAAM,CAAE,CAAC,CAAC,IACd,CAEA,WAAW,kBAAK,CACZ,EAAG,CACC,SAAS,CAAE,OAAO,IAAI,CAC1B,CACA,IAAK,CACD,SAAS,CAAE,OAAO,MAAM,CAC5B,CACJ,CAGA,yBAAY,CACR,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,IAAI,CACV,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,cAAc,CAAE,IAAI,CACpB,KAAK,CAAE,OACX,CAGA,8BAAiB,CACb,YAAY,CAAE,IAAI,CAClB,MAAM,CAAE,IACZ,CAGA,oBAAO,CACH,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MACrB,CAEA,8BAAiB,CACb,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,MAAM,CACX,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,IACZ"}'
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let email = "";
  let password = "";
  getFirestore();
  $$result.css.add(css);
  return `<div class="flex items-center justify-center h-screen bg-gradient-to-b from-blue-600 to-indigo-300"><form class="${escape(null_to_empty(`bg-white bg-opacity-80 p-10 rounded-lg shadow-lg w-96 transition-opacity duration-500 fade-in`), true) + " svelte-vkvs24"}"><h2 class="text-3xl font-bold mb-6 text-center text-gray-800" data-svelte-h="svelte-1r7kpwo">Welcome back!</h2> <div class="relative mb-4"><label for="email" class="block text-gray-600 font-medium" data-svelte-h="svelte-1qxc58d">Email:</label> <i data-feather="mail" class="input-icon svelte-vkvs24"></i>  <input type="email" id="email" required class="input-with-icon border border-gray-300 rounded w-full p-3 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-400 svelte-vkvs24"${add_attribute("value", email, 0)}></div> <div class="relative mb-4"><label for="password" class="block text-gray-600 font-medium" data-svelte-h="svelte-aq8akv">Password:</label> <i data-feather="lock" class="input-icon svelte-vkvs24"></i>  <input type="password" id="password" required class="input-with-icon border border-gray-300 rounded w-full p-3 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-400 svelte-vkvs24"${add_attribute("value", password, 0)}></div> <button type="submit" class="${escape(
    null_to_empty(`bg-gradient-to-b from-blue-400 to-indigo-600 text-white p-3 rounded-lg font-semibold transition-transform duration-300 w-full flex items-center justify-center space-x-2 
                ${"hover:bg-blue-600"}`),
    true
  ) + " svelte-vkvs24"}">${`<i data-feather="log-in"></i>  <span data-svelte-h="svelte-sdljcx">Login</span>`}</button> ${``} <p class="mt-4 text-center text-gray-600" data-svelte-h="svelte-mv37xe">Don&#39;t have an account? 
        <a href="/register" class="text-blue-500 hover:underline register-button svelte-vkvs24"><i data-feather="user-plus"></i> 
          Register here</a></p></form></div>`;
});
export {
  Page as default
};
