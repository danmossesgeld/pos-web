import{s as lt,n as Q,r as at,o as st,a as rt}from"../chunks/scheduler.CZBJOnV1.js";import{S as nt,i as ot,e as p,s as C,c as h,a as S,f as L,k as Y,d as _,l as m,g as q,h as n,m as B,n as j,t as A,b as V,u as X,o as it,j as z}from"../chunks/index.x36UGmBY.js";import{e as Z}from"../chunks/each.D6YF6ztN.js";import{g as ct,q as K,c as dt,w as J,o as ut}from"../chunks/index.esm2017.BMDGLfoS.js";import{g as ft}from"../chunks/entry.BRlZ4at3.js";function $(r,t,l){const e=r.slice();return e[15]=t[l].DateTime,e[16]=t[l].TotalSrp,e[17]=t[l].TotalIncome,e[18]=t[l].id,e}function pt(r){let t,l='<td colspan="5" class="text-center py-4">No transactions found</td>';return{c(){t=p("tr"),t.innerHTML=l},l(e){t=h(e,"TR",{"data-svelte-h":!0}),Y(t)!=="svelte-1rr6of5"&&(t.innerHTML=l)},m(e,a){q(e,t,a)},p:Q,d(e){e&&_(t)}}}function ht(r){let t,l=Z(r[3]),e=[];for(let a=0;a<l.length;a+=1)e[a]=tt($(r,l,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=X()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);t=X()},m(a,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,i);q(a,t,i)},p(a,i){if(i&392){l=Z(a[3]);let o;for(o=0;o<l.length;o+=1){const d=$(a,l,o);e[o]?e[o].p(d,i):(e[o]=tt(d),e[o].c(),e[o].m(t.parentNode,t))}for(;o<e.length;o+=1)e[o].d(1);e.length=l.length}},d(a){a&&_(t),it(e,a)}}}function _t(r){let t,l='<td colspan="5" class="text-center py-4">Loading...</td>';return{c(){t=p("tr"),t.innerHTML=l},l(e){t=h(e,"TR",{"data-svelte-h":!0}),Y(t)!=="svelte-oyoypd"&&(t.innerHTML=l)},m(e,a){q(e,t,a)},p:Q,d(e){e&&_(t)}}}function tt(r){let t,l,e=r[18]+"",a,i,o,d=r[7](r[15])+"",y,E,g,I=r[16]+"",u,x,v,T=r[17]+"",k,P,c,b,F="Details",H,M,O;function w(){return r[13](r[18])}return{c(){t=p("tr"),l=p("td"),a=A(e),i=C(),o=p("td"),y=A(d),E=C(),g=p("td"),u=A(I),x=C(),v=p("td"),k=A(T),P=C(),c=p("td"),b=p("button"),b.textContent=F,H=C(),this.h()},l(f){t=h(f,"TR",{class:!0});var s=S(t);l=h(s,"TD",{class:!0});var D=S(l);a=V(D,e),D.forEach(_),i=L(s),o=h(s,"TD",{class:!0});var N=S(o);y=V(N,d),N.forEach(_),E=L(s),g=h(s,"TD",{class:!0});var R=S(g);u=V(R,I),R.forEach(_),x=L(s),v=h(s,"TD",{class:!0});var G=S(v);k=V(G,T),G.forEach(_),P=L(s),c=h(s,"TD",{class:!0});var U=S(c);b=h(U,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(b)!=="svelte-cmrij7"&&(b.textContent=F),U.forEach(_),H=L(s),s.forEach(_),this.h()},h(){m(l,"class","border px-2 py-1"),m(o,"class","border px-2 py-1"),m(g,"class","border px-2 py-1"),m(v,"class","border px-2 py-1"),m(b,"class","bg-blue-500 text-white rounded-md px-2 py-1 hover:bg-blue-600"),m(c,"class","border px-2 py-1 text-center"),m(t,"class","hover:bg-gray-200 transition duration-200 text-sm")},m(f,s){q(f,t,s),n(t,l),n(l,a),n(t,i),n(t,o),n(o,y),n(t,E),n(t,g),n(g,u),n(t,x),n(t,v),n(v,k),n(t,P),n(t,c),n(c,b),n(t,H),M||(O=j(b,"click",w),M=!0)},p(f,s){r=f,s&8&&e!==(e=r[18]+"")&&z(a,e),s&8&&d!==(d=r[7](r[15])+"")&&z(y,d),s&8&&I!==(I=r[16]+"")&&z(u,I),s&8&&T!==(T=r[17]+"")&&z(k,T)},d(f){f&&_(t),M=!1,O()}}}function et(r){let t,l,e,a,i=r[9]().totalSrp.toFixed(2)+"",o,d,y,E,g=r[9]().totalIncome.toFixed(2)+"",I;return{c(){t=p("div"),l=p("div"),e=p("span"),a=A("Total Sales: "),o=A(i),d=C(),y=p("span"),E=A("Total Income: "),I=A(g),this.h()},l(u){t=h(u,"DIV",{class:!0});var x=S(t);l=h(x,"DIV",{class:!0});var v=S(l);e=h(v,"SPAN",{});var T=S(e);a=V(T,"Total Sales: "),o=V(T,i),T.forEach(_),d=L(v),y=h(v,"SPAN",{});var k=S(y);E=V(k,"Total Income: "),I=V(k,g),k.forEach(_),v.forEach(_),x.forEach(_),this.h()},h(){m(l,"class","flex gap-8 text-lg font-semibold"),m(t,"class","absolute bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg flex items-center gap-8")},m(u,x){q(u,t,x),n(t,l),n(l,e),n(e,a),n(e,o),n(l,d),n(l,y),n(y,E),n(y,I)},p:Q,d(u){u&&_(t)}}}function mt(r){let t,l,e,a,i,o,d,y="~",E,g,I,u,x,v,T,k='<tr><th class="px-2 py-1 text-left text-sm">ID</th> <th class="px-2 py-1 text-left text-sm">DateTime</th> <th class="px-2 py-1 text-left text-sm">Total SRP</th> <th class="px-2 py-1 text-left text-sm">Total Income</th> <th class="px-2 py-1 text-left text-sm">Actions</th></tr>',P,c,b,F,H;function M(s,D){return s[4]?_t:s[3].length>0?ht:pt}let O=M(r),w=O(r),f=r[3].length>0&&et(r);return{c(){t=p("div"),l=p("input"),e=C(),a=p("div"),i=p("input"),o=C(),d=p("span"),d.textContent=y,E=C(),g=p("input"),I=C(),u=p("div"),x=p("div"),v=p("table"),T=p("thead"),T.innerHTML=k,P=C(),c=p("tbody"),w.c(),b=C(),f&&f.c(),this.h()},l(s){t=h(s,"DIV",{class:!0});var D=S(t);l=h(D,"INPUT",{type:!0,placeholder:!0,class:!0}),e=L(D),a=h(D,"DIV",{class:!0});var N=S(a);i=h(N,"INPUT",{type:!0,class:!0}),o=L(N),d=h(N,"SPAN",{"data-svelte-h":!0}),Y(d)!=="svelte-wmyx4s"&&(d.textContent=y),E=L(N),g=h(N,"INPUT",{type:!0,class:!0}),N.forEach(_),D.forEach(_),I=L(s),u=h(s,"DIV",{class:!0});var R=S(u);x=h(R,"DIV",{class:!0});var G=S(x);v=h(G,"TABLE",{class:!0});var U=S(v);T=h(U,"THEAD",{class:!0,"data-svelte-h":!0}),Y(T)!=="svelte-10qvbah"&&(T.innerHTML=k),P=L(U),c=h(U,"TBODY",{class:!0});var W=S(c);w.l(W),W.forEach(_),U.forEach(_),G.forEach(_),b=L(R),f&&f.l(R),R.forEach(_),this.h()},h(){m(l,"type","text"),m(l,"placeholder","Search by ID..."),m(l,"class","border border-gray-300 p-2 rounded-md w-1/3"),m(i,"type","date"),m(i,"class","border border-gray-300 p-2"),m(g,"type","date"),m(g,"class","border border-gray-300 p-2"),m(a,"class","flex gap-2"),m(t,"class","flex items-center justify-between mb-1"),m(T,"class","bg-gradient-to-r from-blue-500 to-blue-500 text-white"),m(c,"class","bg-white"),m(v,"class","min-w-full table-auto border-collapse"),m(x,"class","overflow-x-auto flex-1 pb-20"),m(u,"class","relative flex flex-col h-[calc(100vh-150px)]")},m(s,D){q(s,t,D),n(t,l),B(l,r[0]),n(t,e),n(t,a),n(a,i),B(i,r[1]),n(a,o),n(a,d),n(a,E),n(a,g),B(g,r[2]),q(s,I,D),q(s,u,D),n(u,x),n(x,v),n(v,T),n(v,P),n(v,c),w.m(c,null),n(u,b),f&&f.m(u,null),F||(H=[j(l,"input",r[10]),j(l,"input",r[5]),j(i,"input",r[11]),j(i,"change",r[6]),j(g,"input",r[12]),j(g,"change",r[6])],F=!0)},p(s,[D]){D&1&&l.value!==s[0]&&B(l,s[0]),D&2&&B(i,s[1]),D&4&&B(g,s[2]),O===(O=M(s))&&w?w.p(s,D):(w.d(1),w=O(s),w&&(w.c(),w.m(c,null))),s[3].length>0?f?f.p(s,D):(f=et(s),f.c(),f.m(u,null)):f&&(f.d(1),f=null)},i:Q,o:Q,d(s){s&&(_(t),_(I),_(u)),w.d(),f&&f.d(),F=!1,at(H)}}}function vt(r,t,l){let e="",a="",i="",o=[],d=!1;const y=()=>{l(4,d=!0);try{const c=ct();let b=K(dt(c,"Transactions"));e&&(b=K(b,J("id",">=",e),J("id","<=",e+"ï£¿"))),a&&i&&(b=K(b,J("DateTime",">=",new Date(a).toISOString()),J("DateTime","<=",new Date(i).toISOString())));const F=ut(b,H=>{l(3,o=H.docs.map(M=>M.data())),l(4,d=!1)});rt(()=>{F()})}catch(c){console.error("Error fetching transactions:",c),l(4,d=!1)}};st(()=>{y()});const E=()=>{y()},g=()=>{y()},I=c=>new Date(c).toLocaleString(),u=c=>{ft(`/admin/transactions/transactioninfo?pID=${c}`)},x=()=>o.reduce((c,b)=>(c.totalSrp+=b.TotalSrp||0,c.totalIncome+=b.TotalIncome||0,c),{totalSrp:0,totalIncome:0});function v(){e=this.value,l(0,e)}function T(){a=this.value,l(1,a)}function k(){i=this.value,l(2,i)}return[e,a,i,o,d,E,g,I,u,x,v,T,k,c=>u(c)]}class xt extends nt{constructor(t){super(),ot(this,t,vt,mt,lt,{})}}export{xt as component};
