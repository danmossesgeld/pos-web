import{s as re,f as G,n as ee,r as le,o as ae}from"../chunks/scheduler.CZBJOnV1.js";import{S as oe,i as ne,e as c,s as k,c as f,a as x,k as M,f as w,d as m,l as r,g as A,h as l,m as H,n as J,q as ie,t as ue,b as ce,j as fe}from"../chunks/index.x36UGmBY.js";import{b as de,a as te,s as me}from"../chunks/firebase.client.DeUXI1W3.js";import{g as pe,q as he,c as ge,w as ve,a as be}from"../chunks/index.esm2017.BMDGLfoS.js";import{g as K}from"../chunks/entry.BRlZ4at3.js";import{f as _e}from"../chunks/feather.DxikNGJQ.js";function ye(i){let t,e,s,u="Login";return{c(){t=c("i"),e=k(),s=c("span"),s.textContent=u,this.h()},l(a){t=f(a,"I",{"data-feather":!0}),x(t).forEach(m),e=w(a),s=f(a,"SPAN",{"data-svelte-h":!0}),M(s)!=="svelte-sdljcx"&&(s.textContent=u),this.h()},h(){r(t,"data-feather","log-in")},m(a,o){A(a,t,o),A(a,e,o),A(a,s,o)},d(a){a&&(m(t),m(e),m(s))}}}function ke(i){let t;return{c(){t=c("div"),this.h()},l(e){t=f(e,"DIV",{class:!0}),x(t).forEach(m),this.h()},h(){r(t,"class","spinner svelte-vkvs24")},m(e,s){A(e,t,s)},d(e){e&&m(t)}}}function se(i){let t,e;return{c(){t=c("p"),e=ue(i[2]),this.h()},l(s){t=f(s,"P",{class:!0});var u=x(t);e=ce(u,i[2]),u.forEach(m),this.h()},h(){r(t,"class","text-red-500 mt-2 text-sm text-center")},m(s,u){A(s,t,u),l(t,e)},p(s,u){u&4&&fe(e,s[2])},d(s){s&&m(t)}}}function we(i){let t,e,s,u="Welcome back!",a,o,_,N="Email:",T,E,L,p,j,h,v,O="Password:",q,P,R,b,W,I,V,Q,B,D,X=`Don&#39;t have an account? 
        <a href="/register" class="text-blue-500 hover:underline register-button svelte-vkvs24"><i data-feather="user-plus"></i> 
          Register here</a>`,z,Y;function Z(n,y){return n[3]?ke:ye}let F=Z(i),C=F(i),d=i[2]&&se(i);return{c(){t=c("div"),e=c("form"),s=c("h2"),s.textContent=u,a=k(),o=c("div"),_=c("label"),_.textContent=N,T=k(),E=c("i"),L=k(),p=c("input"),j=k(),h=c("div"),v=c("label"),v.textContent=O,q=k(),P=c("i"),R=k(),b=c("input"),W=k(),I=c("button"),C.c(),Q=k(),d&&d.c(),B=k(),D=c("p"),D.innerHTML=X,this.h()},l(n){t=f(n,"DIV",{class:!0});var y=x(t);e=f(y,"FORM",{class:!0});var g=x(e);s=f(g,"H2",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-1r7kpwo"&&(s.textContent=u),a=w(g),o=f(g,"DIV",{class:!0});var U=x(o);_=f(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(_)!=="svelte-1qxc58d"&&(_.textContent=N),T=w(U),E=f(U,"I",{"data-feather":!0,class:!0}),x(E).forEach(m),L=w(U),p=f(U,"INPUT",{type:!0,id:!0,class:!0}),U.forEach(m),j=w(g),h=f(g,"DIV",{class:!0});var S=x(h);v=f(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(v)!=="svelte-aq8akv"&&(v.textContent=O),q=w(S),P=f(S,"I",{"data-feather":!0,class:!0}),x(P).forEach(m),R=w(S),b=f(S,"INPUT",{type:!0,id:!0,class:!0}),S.forEach(m),W=w(g),I=f(g,"BUTTON",{type:!0,class:!0});var $=x(I);C.l($),$.forEach(m),Q=w(g),d&&d.l(g),B=w(g),D=f(g,"P",{class:!0,"data-svelte-h":!0}),M(D)!=="svelte-mv37xe"&&(D.innerHTML=X),g.forEach(m),y.forEach(m),this.h()},h(){r(s,"class","text-3xl font-bold mb-6 text-center text-gray-800"),r(_,"for","email"),r(_,"class","block text-gray-600 font-medium"),r(E,"data-feather","mail"),r(E,"class","input-icon svelte-vkvs24"),r(p,"type","email"),r(p,"id","email"),p.required=!0,r(p,"class","input-with-icon border border-gray-300 rounded w-full p-3 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-400 svelte-vkvs24"),r(o,"class","relative mb-4"),r(v,"for","password"),r(v,"class","block text-gray-600 font-medium"),r(P,"data-feather","lock"),r(P,"class","input-icon svelte-vkvs24"),r(b,"type","password"),r(b,"id","password"),b.required=!0,r(b,"class","input-with-icon border border-gray-300 rounded w-full p-3 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-400 svelte-vkvs24"),r(h,"class","relative mb-4"),r(I,"type","submit"),r(I,"class",V=G(`bg-gradient-to-b from-blue-400 to-indigo-600 text-white p-3 rounded-lg font-semibold transition-transform duration-300 w-full flex items-center justify-center space-x-2 
                ${i[3]?"bg-blue-600":"hover:bg-blue-600"}`)+" svelte-vkvs24"),r(D,"class","mt-4 text-center text-gray-600"),r(e,"class",G("bg-white bg-opacity-80 p-10 rounded-lg shadow-lg w-96 transition-opacity duration-500 fade-in")+" svelte-vkvs24"),r(t,"class","flex items-center justify-center h-screen bg-gradient-to-b from-blue-600 to-indigo-300")},m(n,y){A(n,t,y),l(t,e),l(e,s),l(e,a),l(e,o),l(o,_),l(o,T),l(o,E),l(o,L),l(o,p),H(p,i[0]),l(e,j),l(e,h),l(h,v),l(h,q),l(h,P),l(h,R),l(h,b),H(b,i[1]),l(e,W),l(e,I),C.m(I,null),l(e,Q),d&&d.m(e,null),l(e,B),l(e,D),z||(Y=[J(p,"input",i[5]),J(b,"input",i[6]),J(e,"submit",ie(i[4]))],z=!0)},p(n,[y]){y&1&&p.value!==n[0]&&H(p,n[0]),y&2&&b.value!==n[1]&&H(b,n[1]),F!==(F=Z(n))&&(C.d(1),C=F(n),C&&(C.c(),C.m(I,null))),y&8&&V!==(V=G(`bg-gradient-to-b from-blue-400 to-indigo-600 text-white p-3 rounded-lg font-semibold transition-transform duration-300 w-full flex items-center justify-center space-x-2 
                ${n[3]?"bg-blue-600":"hover:bg-blue-600"}`)+" svelte-vkvs24")&&r(I,"class",V),n[2]?d?d.p(n,y):(d=se(n),d.c(),d.m(e,B)):d&&(d.d(1),d=null)},i:ee,o:ee,d(n){n&&m(t),C.d(),d&&d.d(),z=!1,le(Y)}}}function xe(i,t,e){let s="",u="",a="",o=!1;const _=pe(),N=async()=>{e(3,o=!0),e(2,a="");try{if(localStorage.getItem("loggedInUser")||""){e(2,a="Another user is already logged in. Please log out first."),e(3,o=!1);return}const j=(await de(te,s,u)).user;localStorage.setItem("loggedInUser",j.email||"");const h=he(ge(_,"users"),ve("email","==",s)),v=await be(h);if(v.empty)e(2,a="No user record found in Firestore.");else{const q=v.docs[0].data();q.type?q.type==="admin"?K("/admin"):q.type==="user"&&K("/user"):(await me(te),localStorage.removeItem("loggedInUser"),alert("Account type is not yet assigned"),K("/login"),location.reload())}}catch(L){console.error("Login Error:",L),e(2,a=L.message)}finally{e(3,o=!1)}};ae(()=>{_e.replace()});function T(){s=this.value,e(0,s)}function E(){u=this.value,e(1,u)}return[s,u,a,o,N,T,E]}class Pe extends oe{constructor(t){super(),ne(this,t,xe,we,re,{})}}export{Pe as component};
