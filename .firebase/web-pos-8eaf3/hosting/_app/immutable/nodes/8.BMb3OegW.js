import{s as fe,n as le,r as pe,o as me}from"../chunks/scheduler.CZBJOnV1.js";import{S as he,i as ve,e as l,s as P,t as ye,c as o,a as f,k as _e,f as S,d as u,b as ge,l as e,g as re,h as r,m as x,n as B,q as be,r as R,j as Ie}from"../chunks/index.x36UGmBY.js";import{g as oe,c as ie,q as ue,w as ce,a as de,d as Ee,u as De}from"../chunks/index.esm2017.BMDGLfoS.js";import{g as H}from"../chunks/entry.BRlZ4at3.js";import{p as we}from"../chunks/stores.n5msExUA.js";function qe(d){let s;return{c(){s=l("i"),this.h()},l(t){s=o(t,"I",{"data-feather":!0,class:!0}),f(s).forEach(u),this.h()},h(){e(s,"data-feather","edit"),e(s,"class","mr-2")},m(t,c){re(t,s,c)},d(t){t&&u(s)}}}function Pe(d){let s;return{c(){s=l("div"),this.h()},l(t){s=o(t,"DIV",{class:!0}),f(s).forEach(u),this.h()},h(){e(s,"class","animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white")},m(t,c){re(t,s,c)},d(t){t&&u(s)}}}function Se(d){let s,t,c,U="UPDATE ITEM",N,a,v,g,j,p,M,E,V,O,n,D,h,y,T,m,Q,b,A,C,_,ee,w,L,F,z=d[4]?"Saving...":"UPDATE",G,te,se;function ae(i,I){return i[4]?Pe:qe}let J=ae(d),k=J(d);return{c(){s=l("div"),t=l("div"),c=l("h2"),c.textContent=U,N=P(),a=l("form"),v=l("div"),g=l("i"),j=P(),p=l("input"),M=P(),E=l("div"),V=l("i"),O=P(),n=l("input"),D=P(),h=l("div"),y=l("i"),T=P(),m=l("input"),Q=P(),b=l("div"),A=l("i"),C=P(),_=l("input"),ee=P(),w=l("button"),k.c(),L=P(),F=l("span"),G=ye(z),this.h()},l(i){s=o(i,"DIV",{class:!0});var I=f(s);t=o(I,"DIV",{class:!0});var K=f(t);c=o(K,"H2",{class:!0,"data-svelte-h":!0}),_e(c)!=="svelte-z93ck2"&&(c.textContent=U),N=S(K),a=o(K,"FORM",{class:!0});var q=f(a);v=o(q,"DIV",{class:!0});var W=f(v);g=o(W,"I",{"data-feather":!0,class:!0}),f(g).forEach(u),j=S(W),p=o(W,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),W.forEach(u),M=S(q),E=o(q,"DIV",{class:!0});var X=f(E);V=o(X,"I",{"data-feather":!0,class:!0}),f(V).forEach(u),O=S(X),n=o(X,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),X.forEach(u),D=S(q),h=o(q,"DIV",{class:!0});var Y=f(h);y=o(Y,"I",{"data-feather":!0,class:!0}),f(y).forEach(u),T=S(Y),m=o(Y,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Y.forEach(u),Q=S(q),b=o(q,"DIV",{class:!0});var Z=f(b);A=o(Z,"I",{"data-feather":!0,class:!0}),f(A).forEach(u),C=S(Z),_=o(Z,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Z.forEach(u),ee=S(q),w=o(q,"BUTTON",{type:!0,class:!0});var $=f(w);k.l($),L=S($),F=o($,"SPAN",{class:!0});var ne=f(F);G=ge(ne,z),ne.forEach(u),$.forEach(u),q.forEach(u),K.forEach(u),I.forEach(u),this.h()},h(){e(c,"class","text-xl font-bold text-gray-700 text-center mb-6"),e(g,"data-feather","tag"),e(g,"class","mr-2 text-gray-400"),e(p,"type","text"),e(p,"id","itemName"),e(p,"class","w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),e(p,"placeholder","Enter item name"),p.required=!0,e(v,"class","flex items-center"),e(V,"data-feather","layers"),e(V,"class","mr-2 text-gray-400"),e(n,"type","number"),e(n,"id","itemQuantity"),e(n,"class","w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),e(n,"placeholder","Enter quantity"),n.required=!0,e(E,"class","flex items-center"),e(y,"data-feather","dollar-sign"),e(y,"class","mr-2 text-gray-400"),e(m,"type","number"),e(m,"id","itemPrice"),e(m,"class","w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),e(m,"placeholder","Enter price"),m.required=!0,e(h,"class","flex items-center"),e(A,"data-feather","dollar-sign"),e(A,"class","mr-2 text-gray-400"),e(_,"type","number"),e(_,"id","itemCost"),e(_,"class","w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),e(_,"placeholder","Enter cost"),_.required=!0,e(b,"class","flex items-center"),e(F,"class","ml-2 text-center"),e(w,"type","submit"),e(w,"class","submit-button flex items-center justify-center"),e(a,"class","space-y-4"),e(t,"class","bg-white shadow-lg rounded-lg p-6 w-full max-w-sm"),e(s,"class","flex justify-center items-center h-screen bg-gray-100")},m(i,I){re(i,s,I),r(s,t),r(t,c),r(t,N),r(t,a),r(a,v),r(v,g),r(v,j),r(v,p),x(p,d[0]),r(a,M),r(a,E),r(E,V),r(E,O),r(E,n),x(n,d[1]),r(a,D),r(a,h),r(h,y),r(h,T),r(h,m),x(m,d[2]),r(a,Q),r(a,b),r(b,A),r(b,C),r(b,_),x(_,d[3]),r(a,ee),r(a,w),k.m(w,null),r(w,L),r(w,F),r(F,G),te||(se=[B(p,"input",d[6]),B(n,"input",d[7]),B(m,"input",d[8]),B(_,"input",d[9]),B(a,"submit",be(d[5]))],te=!0)},p(i,[I]){I&1&&p.value!==i[0]&&x(p,i[0]),I&2&&R(n.value)!==i[1]&&x(n,i[1]),I&4&&R(m.value)!==i[2]&&x(m,i[2]),I&8&&R(_.value)!==i[3]&&x(_,i[3]),J!==(J=ae(i))&&(k.d(1),k=J(i),k&&(k.c(),k.m(w,L))),I&16&&z!==(z=i[4]?"Saving...":"UPDATE")&&Ie(G,z)},i:le,o:le,d(i){i&&u(s),k.d(),te=!1,pe(se)}}}function Ne(d,s,t){let c="",U="",N="",a="",v=!1,g="";me(()=>{const n=we.subscribe(({url:D})=>{g=D.searchParams.get("pID")||"",g?j(g):(alert("Invalid item ID"),H("/admin/inventory"))});return()=>n()});const j=async n=>{var D,h,y;try{const T=oe(),m=ie(T,"Inventory"),Q=ue(m,ce("pID","==",n)),b=await de(Q);if(b.empty)alert("No such item found"),H("/admin/inventory");else{const C=b.docs[0].data();t(0,c=C.name||""),t(1,U=((D=C.stocks)==null?void 0:D.toString())||""),t(2,N=((h=C.srp)==null?void 0:h.toString())||""),t(3,a=((y=C.cost)==null?void 0:y.toString())||"")}}catch(T){console.error("Error fetching item:",T),alert("Error fetching item details"),H("/admin/inventory")}},p=async()=>{t(4,v=!0);try{const n=oe(),D=ie(n,"Inventory"),h=ue(D,ce("pID","==",g)),y=await de(h);if(y.empty)alert("No such item found for update"),H("/admin/inventory");else{const T=Ee(n,"Inventory",y.docs[0].id);await De(T,{name:c,srp:parseFloat(N),stocks:parseInt(U),cost:parseFloat(a)}),alert("Item updated successfully!"),H("/admin/inventory")}}catch(n){console.error("Error updating item:",n),alert("Update unsuccessful. Please try again.")}finally{t(4,v=!1)}};function M(){c=this.value,t(0,c)}function E(){U=R(this.value),t(1,U)}function V(){N=R(this.value),t(2,N)}function O(){a=R(this.value),t(3,a)}return[c,U,N,a,v,p,M,E,V,O]}class xe extends he{constructor(s){super(),ve(this,s,Ne,Se,fe,{})}}export{xe as component};
